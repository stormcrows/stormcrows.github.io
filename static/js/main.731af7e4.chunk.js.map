{"version":3,"sources":["conversors.js","components/StreamGraphChart.js","components/MusicOverTimeSlide.js","components/LollipopChart.js","components/TopArtists.js","mappers.js","components/ScatterplotChart.js","components/SongsScatterSlide.js","App.js","serviceWorker.js","index.js"],"names":["dataByGenres","row","genres","dataBySong","artists","Artists","key","Key","name","Name","year","Year","acousticness","Acousticness","danceability","Danceability","duration","Duration","energy","Energy","explicit","Explicit","instrumentalness","Instrumentalness","liveness","Liveness","loudness","Loudness","mode","Mode","popularity","Popularity","speechiness","Speechiness","tempo","Tempo","valence","Valence","dataByYear","dataWithGenres","StreamGraphChart","id","data","keys","xField","yDomain","yDomainColors","margin","width","height","React","useEffect","svg","d3","append","attr","left","right","top","bottom","x","domain","d","range","call","tickFormat","ticks","y","color","stackedData","offset","toolTip","style","selectAll","enter","y0","y1","on","this","_","i","text","transition","delay","select","remove","MusicOverTimeSlide","useState","setDataByYear","conv","then","sort","a","b","Object","reduce","acc","catch","console","error","className","length","LollipopChart","yField","xDomain","map","padding","lines","circles","mouseleave","tooltip","mouseover","mousemove","html","TopArtists","setDataWithGenres","setGenres","selectedGenre","setSelectedGenre","selectedArtists","setSelectedArtists","onGenreSelect","useCallback","e","genre","target","value","filter","includes","slice","onChange","mapProb","v","Math","floor","ScatterplotChart","shapeField","colorField","colorGroup","colors","xData","yData","legendX","group1Data","group2Data","squares","m","t","replace","Number","toPrecision","mapDuration","SongsScatterSlide","songFeatures","setDataBySong","years","setYears","selectedYear","setSelectedYear","selectedSongs","setSelectedSongs","xAxisFeature","setXAxisFeature","yAxisFeature","setYAxisFeature","onYearSelect","feature","App","slides","slide","setSlide","slideNum","setSlideNum","gotoSlide","nextSlide","href","onClick","max","min","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.731af7e4.chunk.js","sourcesContent":["//0. Artists - in array: ['name', ...]\n//1. Name - string\n//2. Year - int\n//3. Acousticness: 0..1\n//4: Danceability: 0..1\n//5: Duration Ms: min..max\n//6. Energy: 0..1,\n//7: Explicit: 0 or 1\n//8: Instrumentalness: 0..1\n//9: Liveness: 0..1\n//10: Loudness: -min, +max\n//11: Mode: 1 (Major), 0 (Minor)\n//12: Popularity: 0..100\n//13: Speechiness: 0..1\n//14: Tempo: min, max\n//15: Valence: 0..1\n//16: Key: 0..12\n\nexport const dataByGenres = row => row.genres\n\nexport const dataBySong = row => ({\n  artists: row.Artists,\n  key: +row.Key,\n  name: row.Name,\n  year: +row.Year,\n  acousticness: +row.Acousticness,\n  danceability: +row.Danceability,\n  duration: +row.Duration,\n  energy: +row.Energy,\n  explicit: +row.Explicit,\n  instrumentalness: +row.Instrumentalness,\n  liveness: +row.Liveness,\n  loudness: +row.Loudness,\n  mode: +row.Mode,\n  popularity: +row.Popularity / 100.0,\n  speechiness: +row.Speechiness,\n  tempo: +row.Tempo,\n  valence: +row.Valence\n})\n\nexport const dataByYear = row => ({\n  year: +row.year,\n  acousticness: +row.acousticness,\n  danceability: +row.danceability,\n  energy: +row.energy,\n  instrumentalness: +row.instrumentalness,\n  liveness: +row.liveness,\n  loudness: +row.loudness,\n  speechiness: +row.speechiness,\n  popularity: +row.popularity / 100.0,\n})\n\nexport const dataWithGenres = row => ({\n  artists: row.artists,\n  popularity: +row.popularity,\n  genres: row.genres\n})\n","import React from 'react';\nimport * as d3 from 'd3'\n\nfunction StreamGraphChart({\n  id,\n  data,\n  keys = [],\n  xField,\n  yDomain = [],\n  yDomainColors = [],\n  margin,\n  width,\n  height\n}) {\n  React.useEffect(() => {\n    const svg = d3.select(`#${id}`)\n      .append(\"svg\")\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", height + margin.top + margin.bottom)\n      .append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n    const x = d3.scaleLinear()\n      .domain(d3.extent(data, d => d[xField]))\n      .range([0, width]);\n    svg.append(\"g\")\n      .attr(\"transform\", \"translate(0,\" + height + \")\")\n      .call(d3.axisBottom(x).tickFormat(d3.format(\"d\")).ticks(20));\n\n    const y = d3.scaleLinear()\n      .domain(yDomain)\n      .range([height, 0]);\n    svg.append(\"g\")\n      .call(d3.axisLeft(y));\n\n    const color = d3.scaleOrdinal()\n      .domain(keys)\n      .range(yDomainColors)\n\n    const stackedData = d3.stack()\n      .offset(d3.stackOffsetSilhouette)\n      .keys(keys)\n      (data)\n\n    const toolTip = svg\n      .append(\"text\")\n      .attr(\"x\", 0)\n      .attr(\"y\", 0)\n      .style(\"opacity\", 0)\n      .style(\"font-size\", 17)\n\n    const mouseover = function () {\n      toolTip.style(\"opacity\", 1)\n      d3.selectAll(\".area\").style(\"opacity\", .2)\n      d3.select(this)\n        .style(\"stroke\", \"black\")\n        .style(\"opacity\", 1)\n    }\n\n    const mousemove = function (_, i) {\n      toolTip.text(keys[i])\n    }\n\n    const mouseleave = function () {\n      toolTip.style(\"opacity\", 0)\n      d3.selectAll(\".area\").style(\"opacity\", 1).style(\"stroke\", \"none\")\n    }\n\n    const layers = svg\n      .selectAll(\"layers\")\n      .data(stackedData)\n      .enter()\n      .append(\"path\")\n      .attr(\"class\", \"area\")\n      .style(\"fill\", d => color(d.key))\n      .attr(\"d\", d3.area()\n        .x(d => x(d.data[xField]))\n        .y0(d => y(d[0]))\n        .y1(d => y(d[1])))\n      .on(\"mouseover\", mouseover)\n      .on(\"mousemove\", mousemove)\n      .on(\"mouseleave\", mouseleave)\n\n    const duration = 1000\n\n    layers\n      .attr(\"opacity\", 0)\n      .transition()\n      .duration(duration)\n      .delay((_, i) => i * 500)\n      .attr(\"opacity\", 1)\n\n    return () => d3.select(`#${id}`).select('svg').remove()\n  }, [id, data, margin, width, height, keys, xField, yDomain, yDomainColors])\n\n  return (\n    <div id={id}></div>\n  )\n}\n\nexport default StreamGraphChart","import React from 'react';\nimport * as d3 from 'd3'\n\nimport * as conv from '../conversors'\nimport StreamGraphChart from './StreamGraphChart';\n\nfunction MusicOverTimeSlide() {\n  const margin = { top: 20, right: 30, bottom: 30, left: 150 }\n  const width = 1280 - margin.left - margin.right\n  const height = 640 - margin.top - margin.bottom\n\n  const [dataByYear, setDataByYear] = React.useState([])\n\n  React.useEffect(() => {\n    d3.csv('data_by_year_trimmed.csv', conv.dataByYear).then(data => {\n      data.sort((a, b) => b.year - a.year)\n\n      const years = Object.keys(data.reduce((acc, d) => (acc[d.year] = 1, acc), {}))\n      years.sort((a, b) => (+b) - (+a))\n\n      setDataByYear(data)\n    }).catch(console.error)\n  }, [])\n\n  return (\n    <div className=\"chart-group\">\n      <h3>Music Over Time</h3>\n      {dataByYear.length === 0 ? \"Loading...\" :\n        <>\n          <p>This colorful stream graph chart shows how popularity's rise has also brought decline in demand for acousticness,<br />\n            instumentalness and demanding more energy in music.</p>\n          <p><i>Try to guess which is 'acousticness', 'energy', 'instrumentalness', 'speechiness' and 'popularity',<br />\n          then hover over the stream to uncover the name.</i></p>\n          <StreamGraphChart\n            id=\"StreamGraphChart\"\n            data={dataByYear}\n            keys={['acousticness', 'energy', 'instrumentalness', 'speechiness', 'popularity']}\n            xField=\"year\"\n            yDomain={[-1, 1]}\n            yDomainColors={['#984ea3', '#ff7f00', '#ffff33', '#a65628', '#f781bf']}\n            margin={margin}\n            width={width}\n            height={height} />\n        </>}\n    </div>\n  )\n}\n\nexport default MusicOverTimeSlide;\n","import React from 'react';\nimport * as d3 from 'd3'\n\nconst LollipopChart = ({ id, margin, width, height, data, xField, yField, xDomain = [0, 100] }) => {\n\n  React.useEffect(() => {\n    const svg = d3.select(`#${id}`)\n      .append(\"svg\")\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", height + margin.top + margin.bottom)\n      .append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n    const x = d3.scaleLinear()\n      .domain(xDomain)\n      .range([0, width]);\n    svg.append(\"g\")\n      .attr(\"transform\", \"translate(0,\" + height + \")\")\n      .call(d3.axisBottom(x))\n      .selectAll(\"text\")\n      .attr(\"transform\", \"translate(-10,0)rotate(-45)\")\n      .style(\"text-anchor\", \"end\");\n\n    const y = d3.scaleBand()\n      .range([0, height])\n      .domain(data.map(d => d[yField]))\n      .padding(.1);\n    svg.append(\"g\")\n      .call(d3.axisLeft(y))\n\n    const lines = svg.selectAll(\"lines\")\n      .data(data)\n      .enter()\n      .append(\"line\")\n\n      .attr(\"x1\", x(0))\n      .attr(\"x2\", x(0))\n      .attr(\"y1\", d => y(d[yField]))\n      .attr(\"y2\", d => y(d[yField]))\n      .attr(\"stroke\", \"grey\")\n\n    const circles = svg.selectAll(\"circles\")\n      .data(data)\n      .enter()\n      .append(\"circle\")\n      .attr(\"r\", \"5\")\n      .style(\"fill\", \"#69b3a2\")\n      .attr(\"stroke\", \"black\")\n      .attr(\"cx\", x(0))\n      .attr(\"cy\", d => y(d[yField]))\n      .attr(\"y1\", d => y(d[yField]))\n      .attr(\"y2\", d => y(d[yField]))\n\n    const mouseleave = function (d) {\n      tooltip\n        .transition()\n        .duration(200)\n        .style(\"opacity\", 0)\n    }\n\n    const duration = 2000\n\n    lines\n      .transition()\n      .duration(duration)\n      .delay((_, i) => i * 3)\n      .attr(\"x1\", d => x(d[xField]))\n\n    circles\n      .transition()\n      .duration(duration)\n      .delay((_, i) => i * 3)\n      .attr(\"cx\", d => x(d[xField]))\n\n    const tooltip = d3.select(`#${id}`)\n      .append(\"div\")\n      .style(\"opacity\", 0)\n      .style(\"display\", \"none\")\n      .attr(\"class\", \"tooltip\")\n      .style(\"position\", \"absolute\")\n      .style(\"text-align\", \"left\")\n      .style(\"background-color\", \"white\")\n      .style(\"border\", \"solid\")\n      .style(\"border-width\", \"1px\")\n      .style(\"border-radius\", \"5px\")\n      .style(\"padding\", \"10px\")\n      .style(\"pointer-events\", \"none\")\n\n    const mouseover = function (d) {\n      tooltip.style(\"opacity\", 1).style(\"display\", \"block\")\n    }\n\n    const mousemove = function (d) {\n      tooltip.html(`Popularity of ${d.artists}: ${d.popularity}`)\n        .style(\"left\", (d3.mouse(this)[0] + 200) + \"px\")\n        .style(\"top\", (y(d[yField]) + 400) + \"px\")\n    }\n\n    circles.on(\"mouseover\", mouseover)\n      .on(\"mousemove\", mousemove)\n      .on(\"mouseleave\", mouseleave)\n    lines.on(\"mouseover\", mouseover)\n      .on(\"mousemove\", mousemove)\n      .on(\"mouseleave\", mouseleave)\n\n    return () => d3.select(`#${id}`).select('svg').remove()\n  }, [id, margin, width, height, data, xField, yField, xDomain])\n\n  return (\n    <div id={id}></div>\n  )\n}\n\nexport default LollipopChart","import React from 'react';\nimport * as d3 from 'd3'\n\nimport * as conv from '../conversors'\nimport LollipopChart from './LollipopChart';\n\nfunction TopArtists() {\n  const margin = { top: 20, right: 30, bottom: 30, left: 150 }\n  const width = 1280 - margin.left - margin.right\n  const height = 640 - margin.top - margin.bottom\n  const topPopularLimit = 50\n\n  const [dataWithGenres, setDataWithGenres] = React.useState([])\n\n  const [genres, setGenres] = React.useState([])\n  const [selectedGenre, setSelectedGenre] = React.useState(\"all\")\n\n  const [selectedArtists, setSelectedArtists] = React.useState([])\n\n  const onGenreSelect = React.useCallback(e => {\n    const genre = e.target.value\n    setSelectedGenre(genre)\n    const data = genre === \"all\"\n      ? dataWithGenres\n      : dataWithGenres.filter(d => d.genres.includes(genre))\n    setSelectedArtists(data.slice(0, topPopularLimit))\n  }, [dataWithGenres])\n\n  React.useEffect(() => {\n    d3.csv('data_w_genres_trimmed.csv', conv.dataWithGenres).then(data => {\n      data.sort((a, b) => b.popularity - a.popularity)\n      setDataWithGenres(data)\n      setSelectedArtists(data.slice(0, topPopularLimit))\n    }).catch(console.error)\n  }, [])\n\n  React.useEffect(() => {\n    d3.csv('data_by_genres_trimmed.csv', conv.dataByGenres).then(data => setGenres(['all', ...data])).catch(console.error)\n  }, [])\n\n  return (\n    <div className=\"chart-group\">\n      <h3>Top Artists</h3>\n      {dataWithGenres.length === 0 || genres.length === 0 ? \"Loading...\" :\n        <>\n          <p>See {topPopularLimit} popular artists by {genres.length} genres.</p>\n          <p><i>Choose your favourite genre or explore something new.</i>\n            <br />\n            genre: <select onChange={onGenreSelect} value={selectedGenre}>{genres.map(genre => (<option key={genre}>{genre}</option>))}</select>\n          </p>\n          <LollipopChart\n            id=\"LollipopChart\"\n            data={selectedArtists}\n            xDomain={[0, 100]}\n            xField=\"popularity\"\n            yField=\"artists\"\n            margin={margin}\n            width={width}\n            height={height} />\n        </>}\n    </div >\n  )\n}\n\nexport default TopArtists;\n","export const mapKey = key => ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'][key]\nexport const mapProb = v => `${Math.floor(v > 1 ? v : v * 100.0)}%`\nexport const mapMode = m => m === 1 ? 'Major' : 'Minor'\nexport const mapExplicit = e => e === 0 ? 'No' : 'Yes'\nexport const mapDuration = d => `${Number(d / 1000 / 60).toPrecision(2)}m`\nexport const stringifyArrayText = t => t && t.replace(/['\"[\\]]+/g, '')","import React from 'react';\nimport * as d3 from 'd3'\n\nimport { mapDuration, mapExplicit, mapKey, mapMode, mapProb, stringifyArrayText } from '../mappers'\n\nconst ScatterplotChart = ({ id, data, xField, yField, shapeField, colorField, colorGroup, colors, margin, width, height }) => {\n\n  React.useEffect(() => {\n    const svg = d3.select(`#${id}`)\n      .style(\"cursor\", \"hand\")\n      .append(\"svg\")\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", height + margin.top + margin.bottom)\n      .append(\"g\")\n      .attr(\"transform\",\n        \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n    const xData = data.map(d => d[xField])\n    const yData = data.map(d => d[yField])\n\n    const x = d3.scaleLinear()\n      .domain([d3.min(xData), d3.max(xData)])\n      .range([0, width]);\n    svg.append(\"g\")\n      .attr(\"transform\", \"translate(0,\" + height + \")\")\n      .call(d3.axisBottom(x))\n\n    svg.append(\"text\")\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"x\", width / 2)\n      .attr(\"y\", height + 50)\n      .text(xField)\n\n    const y = d3.scaleLinear()\n      .domain([d3.min(yData), d3.max(yData)])\n      .range([height, 0]);\n    svg.append(\"g\")\n      .call(d3.axisLeft(y));\n\n    svg.append(\"text\")\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"x\", x(0) - 50)\n      .attr(\"y\", height / 2)\n      .text(yField)\n\n    const legendX = 15\n\n    svg.append(\"circle\").attr(\"cx\", legendX).attr(\"cy\", 0).attr(\"r\", 6).style(\"fill\", colors[0])\n    svg.append(\"circle\").attr(\"cx\", legendX).attr(\"cy\", 20).attr(\"r\", 6).style(\"fill\", colors[1])\n    svg.append(\"rect\").attr(\"x\", legendX - 5).attr(\"y\", 40).attr(\"width\", 10).attr(\"height\", 10).style(\"fill\", \"black\")\n    svg.append(\"circle\").attr(\"cx\", legendX).attr(\"cy\", 64).attr(\"r\", 6).style(\"fill\", \"black\")\n\n    svg.append(\"text\").attr(\"x\", legendX + 10).attr(\"y\", 4).text(\"Major mode\").style(\"font-size\", \"15px\").attr(\"alignment-baseline\", \"middle\")\n    svg.append(\"text\").attr(\"x\", legendX + 10).attr(\"y\", 24).text(\"Minor mode\").style(\"font-size\", \"15px\").attr(\"alignment-baseline\", \"middle\")\n    svg.append(\"text\").attr(\"x\", legendX + 10).attr(\"y\", 50).text(\"Explicit\").style(\"font-size\", \"15px\").attr(\"alignment-baseline\", \"middle\")\n    svg.append(\"text\").attr(\"x\", legendX + 10).attr(\"y\", 70).text(\"Non Explicit\").style(\"font-size\", \"15px\").attr(\"alignment-baseline\", \"middle\")\n\n    const group1Data = data.filter(d => !d[shapeField])\n    const circles = svg.append('g')\n      .selectAll(\"circle\")\n      .data(group1Data)\n      .enter().append(\"circle\")\n      .attr(\"opacity\", 0)\n      .attr(\"cx\", width / 2)\n      .attr(\"cy\", height / 2)\n      .attr(\"r\", 3)\n\n    const group2Data = data.filter(d => !!d[shapeField])\n    const squares = svg.append('g')\n      .selectAll(\"rect\")\n      .data(group2Data)\n      .enter().append(\"rect\")\n      .attr(\"opacity\", 0)\n      .attr(\"x\", width / 2)\n      .attr(\"y\", height / 2)\n      .attr(\"width\", 5)\n      .attr(\"height\", 5)\n\n    if (colorField) {\n      const color = d3.scaleOrdinal()\n        .domain(colorGroup)\n        .range(colors)\n\n      circles.style(\"fill\", d => color(d[colorField]))\n      squares.style(\"fill\", d => color(d[colorField]))\n    }\n\n    circles\n      .transition()\n      .duration(1000)\n      .delay((_, i) => i)\n      .attr(\"opacity\", \"1\")\n      .attr(\"cx\", d => x(d[xField]))\n      .attr(\"cy\", d => y(d[yField]))\n    squares\n      .transition()\n      .duration(1000)\n      .delay((_, i) => i * 2)\n      .attr(\"opacity\", \"1\")\n      .attr(\"x\", d => x(d[xField]))\n      .attr(\"y\", d => y(d[yField]))\n\n    const tooltip = d3.select(`#${id}`)\n      .append(\"div\")\n      .style(\"opacity\", 0)\n      .style(\"display\", \"none\")\n      .attr(\"class\", \"tooltip\")\n      .style(\"position\", \"absolute\")\n      .style(\"text-align\", \"left\")\n      .style(\"background-color\", \"white\")\n      .style(\"border\", \"solid\")\n      .style(\"border-width\", \"1px\")\n      .style(\"border-radius\", \"5px\")\n      .style(\"padding\", \"10px\")\n      .style(\"pointer-events\", \"none\")\n\n    const mouseover = function (d) {\n      tooltip.style(\"opacity\", 1).style(\"display\", \"block\")\n    }\n\n    const mousemove = function (d) {\n      tooltip.html(`${d.name}<br/>\n        by ${stringifyArrayText(d.artists)}<br/>\n        <br/>\n        key: ${mapKey(d.key)}<br/>\n        tempo: ${Math.floor(d.tempo)} bpm<br/>\n        mode: ${mapMode(d.mode)}<br/>\n        explicit: ${mapExplicit(d.explicit)}<br/>\n        duration: ${mapDuration(d.duration)}<br/>\n        <br/>\n        popularity: ${mapProb(d.popularity)}<br/>\n        acousticness: ${mapProb(d.acousticness)}<br/>\n        danceability: ${mapProb(d.danceability)}<br/>\n        energy: ${mapProb(d.energy)}<br/>\n        instrumentalness: ${mapProb(d.instrumentalness)}<br/>\n        liveness: ${mapProb(d.liveness)}<br/>\n        loudness: ${d.loudness} dB<br/>\n        speechiness: ${mapProb(d.speechiness)}<br/>\n        valence: ${mapProb(d.valence)}`)\n        .style(\"left\", (d3.mouse(this)[0] + 225) + \"px\")\n        .style(\"top\", (y(d[yField]) + 80) + \"px\")\n    }\n\n    const mouseleave = function (d) {\n      tooltip\n        .transition()\n        .duration(200)\n        .style(\"opacity\", 0)\n    }\n\n    circles.on(\"mouseover\", mouseover)\n      .on(\"mousemove\", mousemove)\n      .on(\"mouseleave\", mouseleave)\n    squares.on(\"mouseover\", mouseover)\n      .on(\"mousemove\", mousemove)\n      .on(\"mouseleave\", mouseleave)\n\n    return () => d3.select(`#${id}`).select('svg').remove()\n  }, [id, data, xField, yField, shapeField, colorField, colorGroup, colors, margin, width, height])\n\n  return (\n    <div id={id}></div>\n  )\n}\n\nexport default ScatterplotChart","import React from 'react';\nimport * as d3 from 'd3'\n\nimport * as conv from '../conversors'\nimport ScatterplotChart from './ScatterplotChart';\n\nfunction SongsScatterSlide() {\n  const margin = { top: 20, right: 30, bottom: 70, left: 200 }\n  const width = 1280 - margin.left - margin.right\n  const height = 640 - margin.top - margin.bottom\n\n  const songFeatures = [\n    'key',\n    'acousticness',\n    'danceability',\n    'duration',\n    'energy',\n    'instrumentalness',\n    'liveness',\n    'loudness',\n    'popularity',\n    'speechiness',\n    'tempo',\n    'valence'\n  ]\n\n  const [dataBySong, setDataBySong] = React.useState([])\n\n  const [years, setYears] = React.useState([])\n  const [selectedYear, setSelectedYear] = React.useState(2020)\n\n  const [selectedSongs, setSelectedSongs] = React.useState([])\n\n  const [xAxisFeature, setXAxisFeature] = React.useState(\"tempo\")\n  const [yAxisFeature, setYAxisFeature] = React.useState(\"danceability\")\n\n  const onYearSelect = React.useCallback(e => {\n    const year = +e.target.value\n    setSelectedSongs(dataBySong.filter(d => d.year === year))\n  }, [dataBySong])\n\n  const onXAxisSelect = e => setXAxisFeature(e.target.value)\n  const onYAxisSelect = e => setYAxisFeature(e.target.value)\n\n  React.useEffect(() => {\n    d3.csv('data_by_year_trimmed.csv', conv.dataByYear).then(data => {\n      data.sort((a, b) => b.year - a.year)\n\n      const years = Object.keys(data.reduce((acc, d) => (acc[d.year] = 1, acc), {}))\n      years.sort((a, b) => (+b) - (+a))\n\n      setYears(years)\n      setSelectedYear(years[0])\n    }).catch(console.error)\n  }, [])\n\n  React.useEffect(() => {\n    d3.csv('data_by_song.csv', conv.dataBySong).then(data => {\n      setDataBySong(data)\n      setSelectedSongs(data.filter(d => d.year === selectedYear))\n    }).catch(console.error)\n  }, [])\n\n  return (\n    <div className=\"chart-group\">\n      <h3>Song Scatter</h3>\n      <p>Each point represents a song and each has it's story!</p>\n      {selectedSongs.length === 0 ? \"Loading...\" :\n        <>\n          <p><i>Hover over the points to explore {selectedSongs.length} songs of by:</i></p>\n          <div>\n            Year: <select onChange={onYearSelect}>{years.map(year => (<option key={year}>{year}</option>))}</select>&nbsp;\n            X-Axis: <select onChange={onXAxisSelect} value={xAxisFeature}>{songFeatures.map(feature => (<option key={feature}>{feature}</option>))}</select>&nbsp;\n            Y-Axis: <select onChange={onYAxisSelect} value={yAxisFeature}>{songFeatures.map(feature => (<option key={feature}>{feature}</option>))}</select>\n          </div>\n          <ScatterplotChart\n            id=\"ScatterplotChart\"\n            data={selectedSongs}\n            xField={xAxisFeature}\n            yField={yAxisFeature}\n            colorField={\"mode\"}\n            shapeField={\"explicit\"}\n            colorGroup={[1, 0]}\n            colors={[\"#F8766D\", \"#00BA38\"]}\n            margin={margin}\n            width={width}\n            height={height}\n          />\n        </>}\n    </div>\n  )\n}\n\nexport default SongsScatterSlide;\n","import React from 'react';\n\nimport './App.css';\nimport MusicOverTimeSlide from './components/MusicOverTimeSlide'\nimport TopArtists from './components/TopArtists'\nimport SongsScatterSlide from './components/SongsScatterSlide'\n\nfunction App() {\n  const slides = [\n    <MusicOverTimeSlide />,\n    <TopArtists />,\n    <SongsScatterSlide />\n  ]\n\n  const DEFAULT_SIDE = 0\n  const [slide, setSlide] = React.useState(slides[DEFAULT_SIDE])\n  const [slideNum, setSlideNum] = React.useState(DEFAULT_SIDE)\n\n  const gotoSlide = nextSlide => {\n    setSlide(slides[nextSlide])\n    setSlideNum(nextSlide)\n  }\n\n  const nextSlide = () => gotoSlide(Math.min(slideNum + 1, slides.length))\n  const prevSlide = () => gotoSlide(Math.max(slideNum - 1, 0))\n\n  return (\n    <div id=\"App\" className=\"App\">\n      <div>\n        <h1>Spotify Dataset Explorer</h1>\n        by Rafal Tytyk [<a href=\"mailto:rtytyk2@illinois.edu\">rtytyk2</a>] <br />\n        An Interactive Slideshow for CS-498 Data Visualisation<br />\n        Summer 2020<br />\n        <br />\n        data source: <a href=\"https://www.kaggle.com/yamaerenay/spotify-dataset-19212020-160k-tracks\">Spotify Dataset on Kaggle</a><br />\n        license: <a href=\"https://cdla.io/sharing-1-0/\">Community Data License Agreement - Sharing - Version 1.0</a><br />\n        <br />\n      </div>\n      <button onClick={\n        () => gotoSlide(0)}>Music over Time</button>\n        | <button onClick={() => gotoSlide(1)}>Top Artists</button>\n        | <button onClick={() => gotoSlide(2)}>Song Scatter</button>\n      <br />\n      <br />\n      {slideNum > 0 ? <button onClick={prevSlide}>Prev</button> : null}\n      {slideNum < slides.length - 1 ? <button onClick={nextSlide}>Next</button> : null}\n      {slide}\n    </div >\n  )\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}