(this.webpackJsonpdataviz=this.webpackJsonpdataviz||[]).push([[0],{67:function(t,e,n){t.exports=n(74)},72:function(t,e,n){},73:function(t,e,n){},74:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(24),l=n.n(o),i=(n(72),n(2)),c=(n(73),n(1)),s=function(t){return t.genres},u=function(t){return{artists:t.Artists,key:+t.Key,name:t.Name,year:+t.Year,acousticness:+t.Acousticness,danceability:+t.Danceability,duration:+t.Duration,energy:+t.Energy,explicit:+t.Explicit,instrumentalness:+t.Instrumentalness,liveness:+t.Liveness,loudness:+t.Loudness,mode:+t.Mode,popularity:+t.Popularity/100,speechiness:+t.Speechiness,tempo:+t.Tempo,valence:+t.Valence}},p=function(t){return{year:+t.year,acousticness:+t.acousticness,danceability:+t.danceability,energy:+t.energy,instrumentalness:+t.instrumentalness,liveness:+t.liveness,loudness:+t.loudness,speechiness:+t.speechiness,popularity:+t.popularity/100}},d=function(t){return{artists:t.artists,popularity:+t.popularity,genres:t.genres}};var m=function(t){var e=t.id,n=t.data,a=t.keys,o=void 0===a?[]:a,l=t.xField,i=t.yDomain,s=void 0===i?[]:i,u=t.yDomainColors,p=void 0===u?[]:u,d=t.margin,m=t.width,y=t.height;return r.a.useEffect((function(){var t=c.m("#".concat(e)).append("svg").attr("width",m+d.left+d.right).attr("height",y+d.top+d.bottom).append("g").attr("transform","translate("+d.left+","+d.top+")"),a=c.k().domain(c.e(n,(function(t){return t[l]}))).range([0,m]);t.append("g").attr("transform","translate(0,"+y+")").call(c.b(a).tickFormat(c.f("d")).ticks(20));var r=c.k().domain(s).range([y,0]);t.append("g").call(c.c(r));var i=c.l().domain(o).range(p),u=c.o().offset(c.p).keys(o)(n),f=t.append("text").attr("x",0).attr("y",0).style("opacity",0).style("font-size",17);return t.selectAll("layers").data(u).enter().append("path").attr("class","area").style("fill",(function(t){return i(t.key)})).attr("d",c.a().x((function(t){return a(t.data[l])})).y0((function(t){return r(t[0])})).y1((function(t){return r(t[1])}))).on("mouseover",(function(){f.style("opacity",1),c.n(".area").style("opacity",.2),c.m(this).style("stroke","black").style("opacity",1)})).on("mousemove",(function(t,e){f.text(o[e])})).on("mouseleave",(function(){f.style("opacity",0),c.n(".area").style("opacity",1).style("stroke","none")})).attr("opacity",0).transition().duration(1e3).delay((function(t,e){return 500*e})).attr("opacity",1),function(){return c.m("#".concat(e)).select("svg").remove()}}),[e,n,d,m,y,o,l,s,p]),r.a.createElement("div",{id:e})};var y=function(){var t={top:20,right:30,bottom:30,left:150},e=1280-t.left-t.right,n=640-t.top-t.bottom,a=r.a.useState([]),o=Object(i.a)(a,2),l=o[0],s=o[1];return r.a.useEffect((function(){c.d("data_by_year_trimmed.csv",p).then((function(t){t.sort((function(t,e){return e.year-t.year})),Object.keys(t.reduce((function(t,e){return t[e.year]=1,t}),{})).sort((function(t,e){return+e-+t})),s(t)})).catch(console.error)}),[]),r.a.createElement("div",{className:"chart-group"},r.a.createElement("h3",null,"Music Over Time"),0===l.length?"Loading...":r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"This colorful stream graph chart shows how popularity's rise has also brought decline in demand for acousticness,",r.a.createElement("br",null),"instumentalness and demanding more energy in music."),r.a.createElement("p",null,r.a.createElement("i",null,"Try to guess which is 'acousticness', 'energy', 'instrumentalness', 'speechiness' and 'popularity',",r.a.createElement("br",null),"then hover over the stream to uncover the name.")),r.a.createElement(m,{id:"StreamGraphChart",data:l,keys:["acousticness","energy","instrumentalness","speechiness","popularity"],xField:"year",yDomain:[-1,1],yDomainColors:["#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],margin:t,width:e,height:n})))},f=n(25),h=function(t){var e=t.id,n=t.margin,a=t.width,o=t.height,l=t.data,i=t.xField,s=t.yField,u=t.xDomain,p=void 0===u?[0,100]:u;return r.a.useEffect((function(){var t=c.m("#".concat(e)).append("svg").attr("width",a+n.left+n.right).attr("height",o+n.top+n.bottom).append("g").attr("transform","translate("+n.left+","+n.top+")"),r=c.k().domain(p).range([0,a]);t.append("g").attr("transform","translate(0,"+o+")").call(c.b(r)).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end");var u=c.j().range([0,o]).domain(l.map((function(t){return t[s]}))).padding(.1);t.append("g").call(c.c(u));var d=t.selectAll("lines").data(l).enter().append("line").attr("x1",r(0)).attr("x2",r(0)).attr("y1",(function(t){return u(t[s])})).attr("y2",(function(t){return u(t[s])})).attr("stroke","grey"),m=t.selectAll("circles").data(l).enter().append("circle").attr("r","5").style("fill","#69b3a2").attr("stroke","black").attr("cx",r(0)).attr("cy",(function(t){return u(t[s])})).attr("y1",(function(t){return u(t[s])})).attr("y2",(function(t){return u(t[s])})),y=function(t){f.transition().duration(200).style("opacity",0)};d.transition().duration(2e3).delay((function(t,e){return 3*e})).attr("x1",(function(t){return r(t[i])})),m.transition().duration(2e3).delay((function(t,e){return 3*e})).attr("cx",(function(t){return r(t[i])}));var f=c.m("#".concat(e)).append("div").style("opacity",0).style("display","none").attr("class","tooltip").style("position","absolute").style("text-align","left").style("background-color","white").style("border","solid").style("border-width","1px").style("border-radius","5px").style("padding","10px").style("pointer-events","none"),h=function(t){f.style("opacity",1).style("display","block")},g=function(t){f.html("Popularity of ".concat(t.artists,": ").concat(t.popularity)).style("left",c.i(this)[0]+200+"px").style("top",u(t[s])+400+"px")};return m.on("mouseover",h).on("mousemove",g).on("mouseleave",y),d.on("mouseover",h).on("mousemove",g).on("mouseleave",y),function(){return c.m("#".concat(e)).select("svg").remove()}}),[e,n,a,o,l,i,s,p]),r.a.createElement("div",{id:e})};var g=function(){var t={top:20,right:30,bottom:30,left:150},e=1280-t.left-t.right,n=640-t.top-t.bottom,a=r.a.useState([]),o=Object(i.a)(a,2),l=o[0],u=o[1],p=r.a.useState([]),m=Object(i.a)(p,2),y=m[0],g=m[1],v=r.a.useState("all"),b=Object(i.a)(v,2),x=b[0],E=b[1],k=r.a.useState([]),w=Object(i.a)(k,2),S=w[0],C=w[1],F=r.a.useCallback((function(t){var e=t.target.value;E(e);var n="all"===e?l:l.filter((function(t){return t.genres.includes(e)}));C(n.slice(0,50))}),[l]);return r.a.useEffect((function(){c.d("data_w_genres_trimmed.csv",d).then((function(t){t.sort((function(t,e){return e.popularity-t.popularity})),u(t),C(t.slice(0,50))})).catch(console.error)}),[]),r.a.useEffect((function(){c.d("data_by_genres_trimmed.csv",s).then((function(t){return g(["all"].concat(Object(f.a)(t)))})).catch(console.error)}),[]),r.a.createElement("div",{className:"chart-group"},r.a.createElement("h3",null,"Top Artists"),0===l.length||0===y.length?"Loading...":r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"See ",50," popular artists by ",y.length," genres."),r.a.createElement("p",null,r.a.createElement("i",null,"Choose your favourite genre or explore something new."),r.a.createElement("br",null),"genre: ",r.a.createElement("select",{onChange:F,value:x},y.map((function(t){return r.a.createElement("option",{key:t},t)})))),r.a.createElement(h,{id:"LollipopChart",data:S,xDomain:[0,100],xField:"popularity",yField:"artists",margin:t,width:e,height:n})))},v=function(t){return"".concat(Math.floor(t>1?t:100*t),"%")},b=function(t){var e=t.id,n=t.data,a=t.xField,o=t.yField,l=t.shapeField,i=t.colorField,s=t.colorGroup,u=t.colors,p=t.margin,d=t.width,m=t.height;return r.a.useEffect((function(){var t=c.m("#".concat(e)).style("cursor","hand").append("svg").attr("width",d+p.left+p.right).attr("height",m+p.top+p.bottom).append("g").attr("transform","translate("+p.left+","+p.top+")"),r=n.map((function(t){return t[a]})),y=n.map((function(t){return t[o]})),f=c.k().domain([c.h(r),c.g(r)]).range([0,d]);t.append("g").attr("transform","translate(0,"+m+")").call(c.b(f)),t.append("text").attr("text-anchor","end").attr("x",d/2).attr("y",m+50).text(a);var h=c.k().domain([c.h(y),c.g(y)]).range([m,0]);t.append("g").call(c.c(h)),t.append("text").attr("text-anchor","end").attr("x",f(0)-50).attr("y",m/2).text(o);t.append("circle").attr("cx",15).attr("cy",0).attr("r",6).style("fill",u[0]),t.append("circle").attr("cx",15).attr("cy",20).attr("r",6).style("fill",u[1]),t.append("rect").attr("x",10).attr("y",40).attr("width",10).attr("height",10).style("fill","black"),t.append("circle").attr("cx",15).attr("cy",64).attr("r",6).style("fill","black"),t.append("text").attr("x",25).attr("y",4).text("Major mode").style("font-size","15px").attr("alignment-baseline","middle"),t.append("text").attr("x",25).attr("y",24).text("Minor mode").style("font-size","15px").attr("alignment-baseline","middle"),t.append("text").attr("x",25).attr("y",50).text("Explicit").style("font-size","15px").attr("alignment-baseline","middle"),t.append("text").attr("x",25).attr("y",70).text("Non Explicit").style("font-size","15px").attr("alignment-baseline","middle");var g=n.filter((function(t){return!t[l]})),b=t.append("g").selectAll("circle").data(g).enter().append("circle").attr("opacity",0).attr("cx",d/2).attr("cy",m/2).attr("r",3),x=n.filter((function(t){return!!t[l]})),E=t.append("g").selectAll("rect").data(x).enter().append("rect").attr("opacity",0).attr("x",d/2).attr("y",m/2).attr("width",5).attr("height",5);if(i){var k=c.l().domain(s).range(u);b.style("fill",(function(t){return k(t[i])})),E.style("fill",(function(t){return k(t[i])}))}b.transition().duration(1e3).delay((function(t,e){return e})).attr("opacity","1").attr("cx",(function(t){return f(t[a])})).attr("cy",(function(t){return h(t[o])})),E.transition().duration(1e3).delay((function(t,e){return 2*e})).attr("opacity","1").attr("x",(function(t){return f(t[a])})).attr("y",(function(t){return h(t[o])}));var w=c.m("#".concat(e)).append("div").style("opacity",0).style("display","none").attr("class","tooltip").style("position","absolute").style("text-align","left").style("background-color","white").style("border","solid").style("border-width","1px").style("border-radius","5px").style("padding","10px").style("pointer-events","none"),S=function(t){w.style("opacity",1).style("display","block")},C=function(t){var e,n,a,r;w.html("".concat(t.name,"<br/>\n        by ").concat((r=t.artists,r&&r.replace(/['"[\]]+/g,"")),"<br/>\n        <br/>\n        key: ").concat((a=t.key,["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][a]),"<br/>\n        tempo: ").concat(Math.floor(t.tempo)," bpm<br/>\n        mode: ").concat((n=t.mode,1===n?"Major":"Minor"),"<br/>\n        explicit: ").concat((e=t.explicit,0===e?"No":"Yes"),"<br/>\n        duration: ").concat(function(t){return"".concat(Number(t/1e3/60).toPrecision(2),"m")}(t.duration),"<br/>\n        <br/>\n        popularity: ").concat(v(t.popularity),"<br/>\n        acousticness: ").concat(v(t.acousticness),"<br/>\n        danceability: ").concat(v(t.danceability),"<br/>\n        energy: ").concat(v(t.energy),"<br/>\n        instrumentalness: ").concat(v(t.instrumentalness),"<br/>\n        liveness: ").concat(v(t.liveness),"<br/>\n        loudness: ").concat(t.loudness," dB<br/>\n        speechiness: ").concat(v(t.speechiness),"<br/>\n        valence: ").concat(v(t.valence))).style("left",c.i(this)[0]+225+"px").style("top",h(t[o])+80+"px")},F=function(t){w.transition().duration(200).style("opacity",0)};return b.on("mouseover",S).on("mousemove",C).on("mouseleave",F),E.on("mouseover",S).on("mousemove",C).on("mouseleave",F),function(){return c.m("#".concat(e)).select("svg").remove()}}),[e,n,a,o,l,i,s,u,p,d,m]),r.a.createElement("div",{id:e})};var x=function(){var t={top:20,right:30,bottom:70,left:200},e=1280-t.left-t.right,n=640-t.top-t.bottom,a=["key","acousticness","danceability","duration","energy","instrumentalness","liveness","loudness","popularity","speechiness","tempo","valence"],o=r.a.useState([]),l=Object(i.a)(o,2),s=l[0],d=l[1],m=r.a.useState([]),y=Object(i.a)(m,2),f=y[0],h=y[1],g=r.a.useState(2020),v=Object(i.a)(g,2),x=v[0],E=v[1],k=r.a.useState([]),w=Object(i.a)(k,2),S=w[0],C=w[1],F=r.a.useState("tempo"),j=Object(i.a)(F,2),A=j[0],O=j[1],D=r.a.useState("danceability"),_=Object(i.a)(D,2),M=_[0],N=_[1],T=r.a.useCallback((function(t){var e=+t.target.value;C(s.filter((function(t){return t.year===e})))}),[s]);return r.a.useEffect((function(){c.d("data_by_year_trimmed.csv",p).then((function(t){t.sort((function(t,e){return e.year-t.year}));var e=Object.keys(t.reduce((function(t,e){return t[e.year]=1,t}),{}));e.sort((function(t,e){return+e-+t})),h(e),E(e[0])})).catch(console.error)}),[]),r.a.useEffect((function(){c.d("data_by_song.csv",u).then((function(t){d(t),C(t.filter((function(t){return t.year===x})))})).catch(console.error)}),[]),r.a.createElement("div",{className:"chart-group"},r.a.createElement("h3",null,"Song Scatter"),r.a.createElement("p",null,"Each point represents a song and each has it's story!"),0===S.length?"Loading...":r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("i",null,"Hover over the points to explore ",S.length," songs of by:")),r.a.createElement("div",null,"Year: ",r.a.createElement("select",{onChange:T},f.map((function(t){return r.a.createElement("option",{key:t},t)}))),"\xa0 X-Axis: ",r.a.createElement("select",{onChange:function(t){return O(t.target.value)},value:A},a.map((function(t){return r.a.createElement("option",{key:t},t)}))),"\xa0 Y-Axis: ",r.a.createElement("select",{onChange:function(t){return N(t.target.value)},value:M},a.map((function(t){return r.a.createElement("option",{key:t},t)})))),r.a.createElement(b,{id:"ScatterplotChart",data:S,xField:A,yField:M,colorField:"mode",shapeField:"explicit",colorGroup:[1,0],colors:["#F8766D","#00BA38"],margin:t,width:e,height:n})))};var E=function(){var t=[r.a.createElement(y,null),r.a.createElement(g,null),r.a.createElement(x,null)],e=r.a.useState(t[0]),n=Object(i.a)(e,2),a=n[0],o=n[1],l=r.a.useState(0),c=Object(i.a)(l,2),s=c[0],u=c[1],p=function(e){o(t[e]),u(e)};return r.a.createElement("div",{id:"App",className:"App"},r.a.createElement("div",null,r.a.createElement("h1",null,"Spotify Dataset Explorer"),"by Rafal Tytyk [",r.a.createElement("a",{href:"mailto:rtytyk2@illinois.edu"},"rtytyk2"),"] ",r.a.createElement("br",null),"An Interactive Slideshow for CS-498 Data Visualisation",r.a.createElement("br",null),"Summer 2020",r.a.createElement("br",null),r.a.createElement("br",null),"data source: ",r.a.createElement("a",{href:"https://www.kaggle.com/yamaerenay/spotify-dataset-19212020-160k-tracks"},"Spotify Dataset on Kaggle"),r.a.createElement("br",null),"license: ",r.a.createElement("a",{href:"https://cdla.io/sharing-1-0/"},"Community Data License Agreement - Sharing - Version 1.0"),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("button",{onClick:function(){return p(0)}},"Music over Time"),"| ",r.a.createElement("button",{onClick:function(){return p(1)}},"Top Artists"),"| ",r.a.createElement("button",{onClick:function(){return p(2)}},"Song Scatter"),r.a.createElement("br",null),r.a.createElement("br",null),s>0?r.a.createElement("button",{onClick:function(){return p(Math.max(s-1,0))}},"Prev"):null,s<t.length-1?r.a.createElement("button",{onClick:function(){return p(Math.min(s+1,t.length))}},"Next"):null,a)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[67,1,2]]]);
//# sourceMappingURL=main.731af7e4.chunk.js.map